<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Room Final Status</title>
    <link rel="stylesheet" href="style.css">
</head>

<body onclick="onClick(event)" onmousemove="onMouseMove(event)">
    <!-- create intro -->
    <!-- create popup of the images  -->

    <!-- easiest, link with the room and click to show pics and link -->
    <div>
        <img id="backgroundImg" src="assets/secret-room-the-professor-final.png" alt="">
    </div>



    <div id="content" class="enlarge">


        <!-- need to figure out how to put iframe ontop of the image -->
        <div class="iframeItem">
            <iframe class="item" id="computerWeb"
                src="https://yitingliu97-escape-room-puzzles-1.glitch.me/Escape-Room-Pattern-Recognition-Puzzle/index.html"
                frameborder="0"></iframe>

        </div>


        <img id="computer" class="item" src="assets/computer-withOUT-text.png" alt="">

        <img id="poem" class="item" src="assets/poem.jpg" alt="">
        <img id="recipe" class="item" src="assets/recipe.png" alt="">
        <!-- <img class="item" style="height:70%"src="assets/keypad.png" alt=""> -->

    </div>
    <script>

        let content = document.getElementById('content');
        let computerImg = document.getElementById('computer');
        let poemImg = document.getElementById('poem');
        let recipeImg = document.getElementById('recipe');
        let backgroundImg = document.getElementById('backgroundImg');

        // window.onclick = function (event) {
        //     if (event.target == content) {
        //         content.style.display = "none";
        //     }
        // }
        function onClick(e) {
            const x = e.clientX;
            const y = e.clientY;

            const recipeX = 35.3 / 100 * window.innerWidth;
            const recipeY = 18.9 / 100 * window.innerWidth;
            const recipeR = 2.5 / 100 * window.innerWidth;
            const poemX = 60.8 / 100 * window.innerWidth;
            const poemY = 29.3 / 100 * window.innerWidth;
            const poemR = 1.5 / 100 * window.innerWidth;
            const compX = 44.8 / 100 * window.innerWidth;
            const compY = 25.4 / 100 * window.innerWidth;
            const compR = 4.3 / 100 * window.innerWidth;
            const keyX = 12.5 / 100 * window.innerWidth;
            const keyY = 29.2 / 100 * window.innerWidth;
            const keyR = 1.5 / 100 * window.innerWidth;

            const distToRecipe = dist(x, y, recipeX, recipeY);
            const distToPoem = dist(x, y, poemX, poemY);
            const distToComp = dist(x, y, compX, compY);
            const distToKey = dist(x, y, keyX, keyY);

            if (distToRecipe <= recipeR) {
                // alert('you selected the recipe!');
                content.style.display = "block";
                recipeImg.style.display = "block";
                poemImg.style.display = "none";
                computerImg.style.display = "none";
                // console.log("recipeR", recipeR);
            } else if (distToPoem <= poemR) {
                // alert('you selected the Poem!');
                content.style.display = "block";
                poemImg.style.display = "block";
                computerImg.style.display = "none";
                recipeImg.style.display = "none";

            } else if (distToComp <= compR) {
                alert('you selected the Computer, please go to link https://yitingliu97-escape-room-puzzles-1.glitch.me/Escape-Room-Pattern-Recognition-Puzzle/index.html!');
                content.style.display = "block";
                computerImg.style.display = "block";
                poemImg.style.display = "none";
                recipeImg.style.display = "none";


            } else if (distToKey <= keyR) {
                alert('you selected the Keycode!');
                // content.style.display="block";
                // recipe.style.display="block";
            } else {
                content.style.display = "none";
            }

        }

        function onMouseMove(e) {
            const x = e.clientX;
            const y = e.clientY;

            const recipeX = 35.3 / 100 * window.innerWidth;
            const recipeY = 18.9 / 100 * window.innerWidth;
            const recipeR = 2.5 / 100 * window.innerWidth;
            const poemX = 60.8 / 100 * window.innerWidth;
            const poemY = 29.3 / 100 * window.innerWidth;
            const poemR = 1.5 / 100 * window.innerWidth;
            const compX = 44.8 / 100 * window.innerWidth;
            const compY = 25.4 / 100 * window.innerWidth;
            const compR = 4.3 / 100 * window.innerWidth;
            const keyX = 12.5 / 100 * window.innerWidth;
            const keyY = 29.2 / 100 * window.innerWidth;
            const keyR = 1.5 / 100 * window.innerWidth;

            const distToRecipe = dist(x, y, recipeX, recipeY);
            const distToPoem = dist(x, y, poemX, poemY);
            const distToComp = dist(x, y, compX, compY);
            const distToKey = dist(x, y, keyX, keyY);

            if (distToRecipe <= recipeR || distToPoem <= poemR || distToComp <= compR || distToKey <= keyR) {
                backgroundImg.style.cursor = 'pointer'
            } else {
                backgroundImg.style.cursor = 'default'
            }
        }


        function dist(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2));
        }


    </script>
</body>

</html>