<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Room Final Status</title>
    <link rel="stylesheet" href="style.css">
</head>

<body onclick="onClick(event)" onmousemove="onMouseMove(event)">
    <!-- create intro -->
    <!-- create popup of the images  -->

    <!-- easiest, link with the room and click to show pics and link -->
    <div>
        <img id="backgroundImg" src="assets/secret-room-the-professor-final.png" alt="">
    </div>
    <div id="content" class="enlarge">
        <img id="computer" class="item" src="assets/computer-withOUT-text.png" alt="">
        <img id="poem" class="item" src="assets/poem.jpg" alt="">
        <img id="recipe" class="item" src="assets/recipe.png" alt="">
    </div>
    <div id="computerModalContainer" class="modal">
        <div class="modal-content" id="computerModalContainer">
            <div>
                <span class="close" onclick="closeComputerModal()">&times;</span>
            </div>
            <div>
                <iframe src="/computer"></iframe>
            </div>
            
            
        </div>
    
    </div>
    <script>
        let content = document.getElementById('content');
        let computerImg = document.getElementById('computer');
        let poemImg = document.getElementById('poem');
        let recipeImg = document.getElementById('recipe');
        let backgroundImg = document.getElementById('backgroundImg');

        function onClick(e) {
            const x = e.clientX;
            const y = e.clientY;

            const recipeX = 35.3 / 100 * window.innerWidth;
            const recipeY = 18.9 / 100 * window.innerWidth;
            const recipeR = 2.5 / 100 * window.innerWidth;
            const poemX = 60.8 / 100 * window.innerWidth;
            const poemY = 29.3 / 100 * window.innerWidth;
            const poemR = 1.5 / 100 * window.innerWidth;
            const compX = 44.8 / 100 * window.innerWidth;
            const compY = 25.4 / 100 * window.innerWidth;
            const compR = 4.3 / 100 * window.innerWidth;
            const keyX = 12.5 / 100 * window.innerWidth;
            const keyY = 29.2 / 100 * window.innerWidth;
            const keyR = 1.5 / 100 * window.innerWidth;

            const distToRecipe = dist(x, y, recipeX, recipeY);
            const distToPoem = dist(x, y, poemX, poemY);
            const distToComp = dist(x, y, compX, compY);
            const distToKey = dist(x, y, keyX, keyY);

            if (distToRecipe <= recipeR) {
                content.style.display = "block";
                recipeImg.style.display = "block";
                poemImg.style.display = "none";
                computerImg.style.display = "none";
            } else if (distToPoem <= poemR) {
                content.style.display = "block";
                poemImg.style.display = "block";
                computerImg.style.display = "none";
                recipeImg.style.display = "none";

            } else if (distToComp <= compR) {
                openComputerModal()
            } else if (distToKey <= keyR) {
                alert('key clicked')
            } else {
                content.style.display = "none";
            }

        }

        function onMouseMove(e) {
            const x = e.clientX;
            const y = e.clientY;

            const recipeX = 35.3 / 100 * window.innerWidth;
            const recipeY = 18.9 / 100 * window.innerWidth;
            const recipeR = 2.5 / 100 * window.innerWidth;
            const poemX = 60.8 / 100 * window.innerWidth;
            const poemY = 29.3 / 100 * window.innerWidth;
            const poemR = 1.5 / 100 * window.innerWidth;
            const compX = 44.8 / 100 * window.innerWidth;
            const compY = 25.4 / 100 * window.innerWidth;
            const compR = 4.3 / 100 * window.innerWidth;
            const keyX = 12.5 / 100 * window.innerWidth;
            const keyY = 29.2 / 100 * window.innerWidth;
            const keyR = 1.5 / 100 * window.innerWidth;

            const distToRecipe = dist(x, y, recipeX, recipeY);
            const distToPoem = dist(x, y, poemX, poemY);
            const distToComp = dist(x, y, compX, compY);
            const distToKey = dist(x, y, keyX, keyY);

            if (distToRecipe <= recipeR || distToPoem <= poemR || distToComp <= compR || distToKey <= keyR) {
                backgroundImg.style.cursor = 'pointer'
            } else {
                backgroundImg.style.cursor = 'default'
            }
        }

        function dist(x1, y1, x2, y2) {
            return Math.sqrt(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2));
        }

        var computerModalContainer = document.getElementById("computerModalContainer");

        function openComputerModal() {
            computerModalContainer.style.display = "block";
        }

        function closeComputerModal() {
            computerModalContainer.style.display = "none";
        }

        window.onclick = function (event) {
            if (event.target == computerModalContainer) closeComputerModal();
        }


    </script>
</body>

</html>